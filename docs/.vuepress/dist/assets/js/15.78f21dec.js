(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{340:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"hive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive"}},[t._v("#")]),t._v(" hive")]),t._v(" "),a("h2",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://hdfscli.readthedocs.io/en/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("hdfscli官方文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://my.oschina.net/weiqingbin/blog/189413",target:"_blank",rel:"noopener noreferrer"}},[t._v("impalaSQL"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://blog.csdn.net/mayp1/article/details/51415854",target:"_blank",rel:"noopener noreferrer"}},[t._v("ORACLE/HIVE/impala的SQL比较"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://lxw1234.com/archives/2015/06/251.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive函数"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/ggjucheng/archive/2013/01/03/2843393.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive修改表分区"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.aboutyun.com/thread-7458-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("内部表和外部表的区别"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/ggjucheng/archive/2013/01/03/2843393.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive修改表或分区或路径"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable%2FPartitionStatements",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive的DDL操作"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.cnblogs.com/MOBIN/p/5702580.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive mapjoin"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://gaoxianwei.iteye.com/blog/2160558",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据库表创建加载"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF",target:"_blank",rel:"noopener noreferrer"}},[t._v("hive手册"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://blog.csdn.net/mayp1/article/details/51415854",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考函数"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"hiverc文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hiverc文件"}},[t._v("#")]),t._v(" .hiverc文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".hiverc文件是隐藏文件，可以用ls -a命令查看，启动Hive的时候会去加载这个文件中的内容\n一般.hiverc文件在~/下\n")])])]),a("h2",{attrs:{id:"hive交互shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive交互shell"}},[t._v("#")]),t._v(" HIVE交互shell")]),t._v(" "),a("blockquote",[a("p",[t._v("Hive交互Shell指执行$HIVE_HOME/bin/hive之后，进入的有hive>提示符的交互式命令行")])]),t._v(" "),a("ul",[a("li",[t._v("quit:退出交互Shell")]),t._v(" "),a("li",[t._v("exit:退出交互Shell")])]),t._v(" "),a("h2",{attrs:{id:"hive常用命令行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive常用命令行"}},[t._v("#")]),t._v(" HIVE常用命令行")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义变量，-d A=B")]),t._v("\n-d,–define "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在命令行中设置Hive的运行时配置参数")]),t._v("\n–hiveconf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义变量，同-define")]),t._v("\n–hivevar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"hive的数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive的数据类型"}},[t._v("#")]),t._v(" hive的数据类型")]),t._v(" "),a("ul",[a("li",[t._v("基础数据类型：tinyint,smallint,int,bigint,float,double,boolean,string")]),t._v(" "),a("li",[t._v("复杂数据类型：struct,map,array")])]),t._v(" "),a("h2",{attrs:{id:"上传数据到hdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传数据到hdfs"}},[t._v("#")]),t._v(" 上传数据到hdfs")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SQL语句")]),t._v("\nINSERT overwrite TABLE 表名 partition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'分区名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nSELECT 字段名\nFROM 表名\nWHERE 限制条件\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 命令")]),t._v("\n$ hdfscli upload 文件名 /tmp                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上传文件")]),t._v("\n$ snakebite -n IP地址 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/'")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看文件")]),t._v("\nhive"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" load data inpath "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/文件名'")]),t._v(" into table 数据库.表 partition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("分区1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'值1'")]),t._v(",分区2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'值2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"hive表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive表"}},[t._v("#")]),t._v(" HIVE表")]),t._v(" "),a("ul",[a("li",[t._v("基础表：类似mysql的表结构，默认数据存储在在HDFS上的/user/hive/warehouse/文件夹下")]),t._v(" "),a("li",[t._v("外部表：更多是指数据的路径映射，使用EXTERNAL关键字，数据被移动到创建表时指定的目录")]),t._v(" "),a("li",[t._v("分区表：可以使用PARTITIONED BY进行一个或多个分区")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建外部表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" EXTERNAL "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" test_1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name STRING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" city STRING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SORTED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" TEXTFILE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ROW")]),t._v(" FORMAT DELIMITED‘\\t’ LOCATION ‘hdfs:"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//../../..’ ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建分区表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" EXTERNAL "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" databasename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tablename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line1 string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nPARTITIONED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ROW")]),t._v(" FORMAT DELIMITED\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FIELDS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TERMINATED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\t'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LINES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TERMINATED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),t._v("\nLOCATION\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s3://path/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上传文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("load")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" inpath "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path/test.txt'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" tablename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("添加分区")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一次添加一个分区")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tablename "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20180101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" LOCATION "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一次添加多个分区")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tablename "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20180101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20180101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("删除分区")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tablename "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20180101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tablename "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20180101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aaa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"表结构修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表结构修改"}},[t._v("#")]),t._v(" 表结构修改")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("create database 数据库名 IF NOT EXISTS 数据库名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 建表")]),t._v("\nCREATE TABLE IF NOT EXISTS 数据库.表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    字段名 数据类型 comment "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注'")]),t._v("\n    , 字段名 数据类型 comment "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" PARTITIONED BY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("分区名 数据类型"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nROW "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" delimited FIELDS TERMINATED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[t._v("\\t")]),t._v("'")]),t._v(" stored AS textfile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改列名、类型、备注")]),t._v("\nalter table 表名 change "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" 老字段名 新字段名 新字段类型 comment "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nALTER TABLE 表名  ADD "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("COLUMNS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("列名 数据类型 comment "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 增加列")]),t._v("\nALTER TABLE 老表名 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rename")]),t._v(" to 新表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 表重命名")]),t._v("\ndrop table raw_gem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除表")]),t._v("\ncreate table 表名 like 复制前表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 复制表结构和分区")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 常用操作")]),t._v("\nALTER TABLE name RENAME TO new_name\nALTER TABLE name ADD "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("COLUMNS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col_spec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(", col_spec "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nALTER TABLE name DROP "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("COLUMN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" column_name\nALTER TABLE name CHANGE column_name new_name new_type\nALTER TABLE name REPLACE "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("COLUMNS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col_spec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(", col_spec "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询数据库、数据库中的表名")]),t._v("\nshow create table table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nshow databases"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nshow databases like "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库*'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nshow tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nshow tables "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 数据库名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nshow columns "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询列")]),t._v("\nshow partitions 数据库.表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看表中存在的所有分区")]),t._v("\ndesc 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询表结构")]),t._v("\nuse 数据库"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用数据库")]),t._v("\ntruncate table 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除表中的数据")]),t._v("\ndescribe database "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询数据库所在文件位置目录")]),t._v("\n")])])]),a("h2",{attrs:{id:"数据查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据查询"}},[t._v("#")]),t._v(" 数据查询")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[t._v("invalidate metadata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 刷新impala")]),t._v("\nhive "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from 数据库名.表名 限制条件"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hive一次执行命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 静默模式，可以在输出结果中去掉OK、Time taken等行，以及一些其他无关紧要的输出信息,并将查询到的信息存入文件")]),t._v("\nhive "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("S "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from 数据库名.表名 限制条件"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 文件路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("文件名\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 表生成函数：接受0个或多个输入，产生多列或多行输出")]),t._v("\nSELECT 字段"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("字段 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" 表名 lateral view  explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" subview "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" sub where 限制条件 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSELECT explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" 表名 where 限制条件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# array函数的使用")]),t._v("\nto_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("日期"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成日期格式")]),t._v("\nLENGTH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 计算字段长度")]),t._v("\nrow_number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" over"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("partition BY 字段名"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" ORDER BY 字段名"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" DESC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" AS rn     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 排序")]),t._v("\nregexp_replace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("substr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 字符串操作")]),t._v("\nsubstr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" start_index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 字符串截取，开始截取的位置(1开始)，截取的位数")]),t._v("\nselect decode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("条件值"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("值"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("翻译值"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("值n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("翻译值n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("默认值"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if条件值==值1，返回翻译值1，相当于case when")]),t._v("\ncase when 条件 then 条件为真时的值 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" 条件为假时的值 end\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nvl")]),t._v("\nselect nvl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" form tablename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nselect nvl2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tablename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nullif 如果a和b相等，则返回空，否则返回第一个值")]),t._v("\nselect nullif"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回表达式中的第一个非空表达式，所有表达式的类型必须相同")]),t._v("\nSELECT COALESCE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NULL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("NULL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" FROM tablename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"hive中各种join的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive中各种join的区别"}},[t._v("#")]),t._v(" hive中各种join的区别")]),t._v(" "),a("h3",{attrs:{id:"_1、原始数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、原始数据表"}},[t._v("#")]),t._v(" 1、原始数据表")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" c        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2、left-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、left-join"}},[t._v("#")]),t._v(" 2、left join")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" bb "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3、left-semi-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、left-semi-join"}},[t._v("#")]),t._v(" 3、left semi join")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" semi "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" bb "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--+")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4、left-outer-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、left-outer-join"}},[t._v("#")]),t._v(" 4、left outer join")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("outer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" bb "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5、right-outer-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、right-outer-join"}},[t._v("#")]),t._v(" 5、right outer join")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("right")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("outer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" bb "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" c        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n")])])]),a("h3",{attrs:{id:"_6、join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、join"}},[t._v("#")]),t._v(" 6、join")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aa "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" bb "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" a        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" b        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------+----------+--------+----------+--+")]),t._v("\n")])])]),a("h2",{attrs:{id:"常用的日期处理函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用的日期处理函数"}},[t._v("#")]),t._v(" 常用的日期处理函数")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("create_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("DATEDIFF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("create_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2015")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("07")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("57")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2015")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("57")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("103")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dayofmonth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dayname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\t    Tuesday\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("DAYOFWEEK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("HOURS_ADD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" fresh_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("to_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\t    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("函数")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("DATEDIFF")]),t._v(" "),a("td",[t._v("两个日期间隔的天数")])]),t._v(" "),a("tr",[a("td",[t._v("day")]),t._v(" "),a("td",[t._v("返回该日期在月内的日")])]),t._v(" "),a("tr",[a("td",[t._v("dayofmonth")]),t._v(" "),a("td",[t._v("返回该日期在月内的日")])]),t._v(" "),a("tr",[a("td",[t._v("dayname")]),t._v(" "),a("td",[t._v("返回周的英文名,例（Tuesday）")])]),t._v(" "),a("tr",[a("td",[t._v("DAYOFWEEK")]),t._v(" "),a("td",[t._v("返回周的数字序号，1(Sunday)到7(Saturday)")])]),t._v(" "),a("tr",[a("td",[t._v("DAYOFYEAR")]),t._v(" "),a("td",[t._v("本年的第多少天")])]),t._v(" "),a("tr",[a("td",[t._v("HOUR")]),t._v(" "),a("td",[t._v("返回字符串的小时")])]),t._v(" "),a("tr",[a("td",[t._v("HOURS_ADD")]),t._v(" "),a("td",[t._v("指定日期加n小时")])]),t._v(" "),a("tr",[a("td",[t._v("HOURS_SUB")]),t._v(" "),a("td",[t._v("指定日期减n小时")])]),t._v(" "),a("tr",[a("td",[t._v("month")]),t._v(" "),a("td",[t._v("返回日期的月份")])]),t._v(" "),a("tr",[a("td",[t._v("MONTHS_ADD")]),t._v(" "),a("td",[t._v("指定日期加n月")])]),t._v(" "),a("tr",[a("td",[t._v("MONTHS_SUB")]),t._v(" "),a("td",[t._v("指定日期减n月")])]),t._v(" "),a("tr",[a("td",[t._v("MONTHS_BETWEEN")]),t._v(" "),a("td",[t._v("两个日期间相差的月数，返回浮点数")])]),t._v(" "),a("tr",[a("td",[t._v("to_date")]),t._v(" "),a("td",[t._v("返回时间戳或字符串的日期部分")])])])]),t._v(" "),a("h2",{attrs:{id:"hive命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hive命令"}},[t._v("#")]),t._v(" hive命令")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行一次hive查询")]),t._v("\nhive -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from tablename"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行一次hive查询，不显示MR-job信息，只显示JOB结果")]),t._v("\nhive -S -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from tablename"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行test.sql，并将查询内容存储到test.txt文件")]),t._v("\nhive -f test.sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" test.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义变量")]),t._v("\nhive -d "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value\nhive -hivevar "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value\n")])])]),a("ul",[a("li",[t._v("查询和杀死当前运行任务列表")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询yarn当前运行命令列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" application -list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 杀死某个job")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" application -kill application-id\n")])])]),a("h2",{attrs:{id:"impala"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#impala"}},[t._v("#")]),t._v(" Impala")]),t._v(" "),a("p",[t._v("cloudera 公司出品的另一个 SQL 引擎，功能是 Hive 的一个子集，与 Hive 的区别如下：")]),t._v(" "),a("ul",[a("li",[t._v("使用C++语言实现，基于内存计算而非hive那种转化为mr任务的模式，因此速度比hive快很多，方便用来做一些交互式的SQL查询")]),t._v(" "),a("li",[t._v("自身不负责元数据管理，依赖 Hive 存在")]),t._v(" "),a("li",[t._v("功能是Hive的子集，如hive可以通过 json serde 直接将json格式的文件转化为表，但impala不行。在我们的数据中，行为日志是以json格式存在的，因此，对于行为日志的分析只能通过 hive，其它大部分可以用 impala 替代")]),t._v(" "),a("li",[t._v("由于是基于内存的计算，当需要的内存超过已有的内存时会报错。而hive无此问题，因为中间数据会使用磁盘暂存。")])]),t._v(" "),a("p",[t._v("在hue中选择impala editor即可使用，操作与hive一致。 由于impala自己不维护表结构信息，而是使用hive的信息，且该过程并非实时的。因此， 当hive中表结构发生改变时，需要先执行以下命令，使原来的元数据无效，然后重新获取。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("invalidate metadata;\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);