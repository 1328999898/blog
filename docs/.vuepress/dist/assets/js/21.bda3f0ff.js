(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{344:function(s,t,a){"use strict";a.r(t);var r=a(18),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" MySql")]),s._v(" "),a("h2",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[s._v("#")]),s._v(" 参考文档")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://blog.chinaunix.net/uid-16844903-id-3411118.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MYSQL数据导入导出"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"sql分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql分类"}},[s._v("#")]),s._v(" SQL分类")]),s._v(" "),a("blockquote",[a("p",[s._v("SQL语言共分为四大类：数据查询语言DQL，数据操纵语言DML，数据定义语言DDL，数据控制语言DCL")])]),s._v(" "),a("ul",[a("li",[s._v("数据查询语言DQL:数据查询语言DQL基本结构是由SELECT子句，FROM子句，WHERE")]),s._v(" "),a("li",[s._v("数据操纵语言DML:主要有三种形式：插入：INSERT，更新：UPDATE， 删除：DELETE")]),s._v(" "),a("li",[s._v("数据定义语言DDL:创建数据库中的各种对象--表、视图、索引、同义词、聚簇等如：CREATE TABLE/VIEW/INDEX/SYN/CLUSTER")]),s._v(" "),a("li",[s._v("数据控制语言DCL：用来授予或回收访问数据库的某种特权，并控制数据库操纵事务发生的时间及效果，对数据库实行监视等。如：GRANT：授权, ROLLBACK [WORK] TO [SAVEPOINT]：回退到某一点。")])]),s._v(" "),a("h2",{attrs:{id:"ddl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ddl"}},[s._v("#")]),s._v(" DDL")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询索引")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" 列名 数据类型"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加列")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" 表名 change 老列名 新列名 新数据类型"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改列")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("modify")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" 列名 新数据类型"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改列数据类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" 索引名 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("字段"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("字段"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加索引（多列）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" index_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除索引")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" 复制后表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" 复制前表名 限制条件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制表结构和数据")]),s._v("\n")])])]),a("h2",{attrs:{id:"dql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dql"}},[s._v("#")]),s._v(" DQL")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("reverse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reverse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" server\nregexp_replace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("act_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nsubstr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h2",{attrs:{id:"类型转换-字符串转换为数值类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型转换-字符串转换为数值类型"}},[s._v("#")]),s._v(" 类型转换 - 字符串转换为数值类型")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CAST(xxx  AS   类型), CONVERT(xxx,类型)\n类型必须用下列的类型:\n    二进制,同带binary前缀的效果 : BINARY    \n    字符型,可带参数 : CHAR()     \n    日期 : DATE     \n    时间: TIME     \n    日期时间型 : DATETIME     \n    浮点数 : DECIMAL      \n    整数 : SIGNED     \n    无符号整数 : UNSIGNED\n")])])]),a("h2",{attrs:{id:"数据库-表导入导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库-表导入导出"}},[s._v("#")]),s._v(" 数据库/表导入导出")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql快速复制数据库")]),s._v("\nmysqldump "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h IP地址 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u用户名 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),s._v(" 数据库名 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--add-drop-table | mysql -h IP地址 -u用户名 -p'密码' 数据库名")]),s._v("\n")])])]),a("h2",{attrs:{id:"数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[s._v("#")]),s._v(" 数据类型")]),s._v(" "),a("ul",[a("li",[s._v("日期和时间")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("MySQL数据类型")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("date")]),s._v(" "),a("td",[s._v("3字节，日期，格式：2014-09-18")])]),s._v(" "),a("tr",[a("td",[s._v("time")]),s._v(" "),a("td",[s._v("3字节，时间，格式：08:42:30")])]),s._v(" "),a("tr",[a("td",[s._v("datetime")]),s._v(" "),a("td",[s._v("8字节，日期时间，格式：2014-09-18 08:42:30")])]),s._v(" "),a("tr",[a("td",[s._v("timestamp")]),s._v(" "),a("td",[s._v("4字节，自动存储记录修改的时间")])]),s._v(" "),a("tr",[a("td",[s._v("year")]),s._v(" "),a("td",[s._v("1字节，年份")])])])]),s._v(" "),a("ul",[a("li",[s._v("数值数据类型 - 整型")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("MySQL数据类型")]),s._v(" "),a("th",[s._v("含义（有符号）")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("tinyint")]),s._v(" "),a("td",[s._v("1字节，范围（-128~127）")])]),s._v(" "),a("tr",[a("td",[s._v("smallint")]),s._v(" "),a("td",[s._v("2字节，范围（-32768~32767）")])]),s._v(" "),a("tr",[a("td",[s._v("mediumint")]),s._v(" "),a("td",[s._v("3字节，范围（-8388608~8388607）")])]),s._v(" "),a("tr",[a("td",[s._v("int")]),s._v(" "),a("td",[s._v("4字节，范围（-2147483648~2147483647）")])]),s._v(" "),a("tr",[a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("8字节，范围（+-9.22*10的18次方）")])])])]),s._v(" "),a("ul",[a("li",[s._v("数值数据类型 - 浮点型")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("MySQL数据类型")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("float(m, d)")]),s._v(" "),a("td",[s._v("4字节，单精度浮点型，m总个数，d小数位")])]),s._v(" "),a("tr",[a("td",[s._v("double(m, d)")]),s._v(" "),a("td",[s._v("8字节，双精度浮点型，m总个数，d小数位")])]),s._v(" "),a("tr",[a("td",[s._v("decimal(m, d)")]),s._v(" "),a("td",[s._v("decimal是存储为字符串的浮点数")])])])]),s._v(" "),a("ul",[a("li",[s._v("字符串数据类型")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("MySQL数据类型")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("char(n)")]),s._v(" "),a("td",[s._v("固定长度，最多255个字符")])]),s._v(" "),a("tr",[a("td",[s._v("varchar(n)")]),s._v(" "),a("td",[s._v("可变长度，最多65535个字符")])]),s._v(" "),a("tr",[a("td",[s._v("tinytext")]),s._v(" "),a("td",[s._v("可变长度，最多255个字符")])]),s._v(" "),a("tr",[a("td",[s._v("text")]),s._v(" "),a("td",[s._v("可变长度，最多65535个字符")])]),s._v(" "),a("tr",[a("td",[s._v("mediumtext")]),s._v(" "),a("td",[s._v("可变长度，最多2的24次方-1个字符")])]),s._v(" "),a("tr",[a("td",[s._v("longtext")]),s._v(" "),a("td",[s._v("可变长度，最多2的32次方-1个字符")])])])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("说明\n1.char（n）和varchar（n）中括号中n代表字符的个数，并不代表字节个数，所以当使用了中文的时候(UTF8)意味着可以插入m个中文，但是实际会占用m*3个字节。\n2.同时char和varchar最大的区别就在于char不管实际value都会占用n个字符的空间，而varchar只会占用实际字符应该占用的空间+1，并且实际空间+1<=n。\n3.超过char和varchar的n设置后，字符串会被截断。\n4.char的上限为255字节，varchar的上限65535字节，text的上限为65535。\n5.char在存储的时候会截断尾部的空格，varchar和text不会。\n6.varchar会使用1-3个字节来存储长度，text不会。\n")])])]),a("h2",{attrs:{id:"更改权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改权限"}},[s._v("#")]),s._v(" 更改权限")]),s._v(" "),a("p",[s._v("远程访问某台机器的某个数据库")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" 库名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户名'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'用户地址'")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注：所有的数据库使用“*”，所有表使用“*”")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户地址可以是localhost、ip地址、机器名字、域名，也可以用'%'表示从任何地址连接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 权限：select,insert,update,delete,create,drop,index,alter,grant,references,reload,shutdown,process,file等14个权限。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当使用all privileges或者all代替，表示赋予用户全部权限。")]),s._v("\n")])])]),a("h2",{attrs:{id:"mysql安装（centos7）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装（centos7）"}},[s._v("#")]),s._v(" MySQL安装（Centos7）")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.cnblogs.com/xueweihan/p/5143066.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("brew安装MySQL"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"一、通过官网下载安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、通过官网下载安装mysql"}},[s._v("#")]),s._v(" 一、通过官网下载安装MySQL")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh mysql-community-release-el7-5.noarch.rpm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql-community-server")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service mysqld restart        # 重启mysql服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service mysqld status         # 查看MySQL的运行状态")]),s._v("\n")])])]),a("p",[s._v("安装完成后，配置字符集，重启MySQL，初次启动MySQL时root无密码，可通过"),a("code",[s._v("mysql")]),s._v("或者"),a("code",[s._v("mysql -uroot")]),s._v("启动")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@localhost")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置密码")]),s._v("\n")])])]),a("h3",{attrs:{id:"二、安装mariadb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、安装mariadb"}},[s._v("#")]),s._v(" 二、安装mariadb")]),s._v(" "),a("p",[s._v("安装MySQL的常用安装方法，但是在Centos7中mysql-server安装失败，原因：CentOS7版本将MySQL用mariadb代替了")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql-server")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql-devel")]),s._v("\n")])])]),a("p",[s._v("安装mariadb，并配置字符集")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mariadb-server mariadb ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start mariadb       # 启动MariaDB")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl stop mariadb        # 停止MariaDB")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart mariadb     # 重启MariaDB")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable mariadb      # 设置开机启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start mariadb       # 所以先启动数据库")]),s._v("\n")])])]),a("h2",{attrs:{id:"mysql实现rank排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql实现rank排序"}},[s._v("#")]),s._v(" MySql实现rank排序")]),s._v(" "),a("ul",[a("li",[s._v("普通降序排序")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ul",[a("li",[s._v("并列降序排序")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rank \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ul",[a("li",[s._v("高级排序")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@numrank")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rank"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@numrank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@numrank")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@currank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@prevrank")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@numrank")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" dd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h2",{attrs:{id:"mysql存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql存储引擎"}},[s._v("#")]),s._v(" MySQL存储引擎")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.cnblogs.com/gbyukg/archive/2011/11/09/2242271.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL存储引擎"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("1. MySQL引擎类型")])]),s._v(" "),a("ul",[a("li",[s._v("MyISAM")]),s._v(" "),a("li",[s._v("InnoDB")]),s._v(" "),a("li",[s._v("Memory")]),s._v(" "),a("li",[s._v("CSV")]),s._v(" "),a("li",[s._v("Archive")])]),s._v(" "),a("p",[a("strong",[s._v("2. 查询默认数据存储引擎")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default_storage_engine'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前数据库到默认引擎。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" engines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前数据库所支持的引擎")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'have%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前数据库所支持的引擎，其中Value显示为disabled的表示数据库支持此引擎")]),s._v("\n")])])]),a("p",[a("strong",[s._v("3. 查看文件的存储路径")])]),s._v(" "),a("blockquote",[a("p",[s._v("以下均根据Centos7系统统计")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/my.cnf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/mysql      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据文件的存储位置")]),s._v("\n")])])]),a("h2",{attrs:{id:"一、myisam引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、myisam引擎"}},[s._v("#")]),s._v(" 一、MyISAM引擎")]),s._v(" "),a("p",[s._v("引擎文件")]),s._v(" "),a("ul",[a("li",[s._v(".myd : 表数据文件")]),s._v(" "),a("li",[s._v(".myi : 索引文件")]),s._v(" "),a("li",[s._v(".log : 日志文件")])]),s._v(" "),a("h2",{attrs:{id:"二、innodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、innodb"}},[s._v("#")]),s._v(" 二、InnoDB")]),s._v(" "),a("blockquote",[a("p",[s._v("InnoDB采用表空间（tablespace）来管理数据，存储表数据和索引\nInnodb存储引擎管理主要基于两个文件：表空间数据文件和日志文件。")])]),s._v(" "),a("p",[s._v("引擎文件")]),s._v(" "),a("ul",[a("li",[s._v("ibdata1、ibdata2等 : 系统表空间，存储InnoDB系统信息、用户数据库表和索引，所有表共用")]),s._v(" "),a("li",[s._v(".ibd : (表名.ibd)单个表空间文件，每个表使用一个表空间文件，存放用户数据表数据和索引，默认存储位置在MySQL数据存储目录中数据库目录下")]),s._v(" "),a("li",[s._v("ib_logfile1、ib_logfile2 : 日志文件")])]),s._v(" "),a("p",[a("strong",[s._v("存储文件查询")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /var/lib/mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nauto.cnf  ibdata1  ib_logfile0  ib_logfile1  mysql  mysql.sock  performance_schema  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\naa.frm  aa.ibd  bb.frm  bb.ibd  db.opt\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1. 行锁定（innodb）\n2. 表锁定（myisam）\n")])])]),a("h2",{attrs:{id:"mysql用户创建及授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql用户创建及授权"}},[s._v("#")]),s._v(" MySQL用户创建及授权")]),s._v(" "),a("h3",{attrs:{id:"_1、创建用户与删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建用户与删除用户"}},[s._v("#")]),s._v(" 1、创建用户与删除用户")]),s._v(" "),a("p",[s._v("创建用户")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" 用户名"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@host")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" 密码"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n注：host可以是指定的登陆的主机IP或者本地的localhost，或者允许任意主机可以登陆的"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\n")])])]),a("p",[s._v("删除用户")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" 用户名@主机名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2、授权与撤销授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、授权与撤销授权"}},[s._v("#")]),s._v(" 2、授权与撤销授权")]),s._v(" "),a("p",[s._v("授权")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" pivileges "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" 数据库名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" 用户名@主机名 identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" 密码"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注：all表示所有权限，也可单独指定select、insert等权限")]),s._v("\n")])])]),a("p",[s._v("撤销授权")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("revoke")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" pivileges "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" 数据库名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" 用户名@主机名 identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" 密码"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注：all表示所有权限，也可单独指定select、insert等权限")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3、设置或者更改用户密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、设置或者更改用户密码"}},[s._v("#")]),s._v(" 3、设置或者更改用户密码")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 用户名@主机名 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'新密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"mysql优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql优化"}},[s._v("#")]),s._v(" MYSQL优化")]),s._v(" "),a("blockquote",[a("p",[s._v("空间换时间、时间换空间")])]),s._v(" "),a("h3",{attrs:{id:"_1、表的优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、表的优化"}},[s._v("#")]),s._v(" 1、表的优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("定长和变长字段相分离")]),s._v(" "),a("ul",[a("li",[s._v("如果每个字段的字节数是固定的，每一行的字节数就是固定的，如果想查第n行，跳过前n行的字节数即可，因此查询速度会快很多。")]),s._v(" "),a("li",[s._v("varchar、text、blob等这种变长字段，适合单独存储为一张表，用主键与核心表关联")])])]),s._v(" "),a("li",[a("p",[s._v("常用字段和不常用字段分离")]),s._v(" "),a("ul",[a("li",[s._v("结合业务分析字段的查询场景，查询频率低的字段单独拆分出来")])])]),s._v(" "),a("li",[a("p",[s._v("在需要关联统计的字段上添加冗余字段")])]),s._v(" "),a("li",[a("p",[s._v("列选择原则")]),s._v(" "),a("ul",[a("li",[s._v("字段类型优先级：整型 > date、time > enum、char > varchar > blob、text")])]),s._v(" "),a("p",[s._v("列的特点：")]),s._v(" "),a("ul",[a("li",[s._v("整型：没有国家、地区之分，没有字符集的差异")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("比如：tinyint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、2、3、4、5 和 char"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" a、b、c、d、e\n空间上都占1个字节，但是order by排序前者快，原因是后者需要考虑字符集和校队集"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("默认是排序规则"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ul",[a("li",[s._v("time:定长，运算快，节省时间，考虑时区写SQL不方便，where >= '2005-10-12'，建议用时间戳存储(int unsgined not null)")]),s._v(" "),a("li",[s._v("enum:能起到约束值的目的，内部用整型来存储，但与char联查时，内部需要经历字符串与值的转化")]),s._v(" "),a("li",[s._v("char：定长，需要考虑字符集和排序校对集")]),s._v(" "),a("li",[s._v("varchar：不定长，要考虑字符集的转换和排序时的校对集，速度慢")]),s._v(" "),a("li",[s._v("text、blob：无法使用内存临时表（排序等操作只能在磁盘上进行）")])])]),s._v(" "),a("li",[a("p",[s._v("索引优化")]),s._v(" "),a("ul",[a("li",[s._v("查询频繁")]),s._v(" "),a("li",[s._v("区分度高")]),s._v(" "),a("li",[s._v("长度小")]),s._v(" "),a("li",[s._v("尽量覆盖常用查询字段")]),s._v(" "),a("li",[s._v("索引顺序")]),s._v(" "),a("li",[s._v("可以通过(区分度/长度)获取一个平衡值")])])]),s._v(" "),a("li",[a("p",[s._v("独立索引：同时只能用上一个")])]),s._v(" "),a("li",[a("p",[s._v("联合索引是有顺序的")])])]),s._v(" "),a("p",[s._v("索引作用：")]),s._v(" "),a("ol",[a("li",[s._v("提高查询速度")]),s._v(" "),a("li",[s._v("提高排序速度")]),s._v(" "),a("li",[s._v("提高分组速度")])]),s._v(" "),a("h2",{attrs:{id:"mysql的备份恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql的备份恢复"}},[s._v("#")]),s._v(" MySQL的备份恢复")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://www.cnblogs.com/wxb-km/p/3610594.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysqldump参考文档"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"一、mysql的常用备份方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、mysql的常用备份方式"}},[s._v("#")]),s._v(" 一、MySQL的常用备份方式")]),s._v(" "),a("p",[s._v("MYSQL官方将MySQL的备份方式主要划分为以下三类：")]),s._v(" "),a("ul",[a("li",[s._v("热备份：备份过程中MYSQL实例始终是运行的，所有用户的读写请求都不会受到影响")]),s._v(" "),a("li",[s._v("冷备份：备份前需要先停止MySQL的实例运行，整个备份过程中用户均无法访问数据库")]),s._v(" "),a("li",[s._v("温备份：备份过程中MYSQL实例是运行的，但是为了保证数据的一致性，允许用户通过加锁的方式来方式可能的更新或者修改操作。备份过程中数据是只读的，所有的写请求都会被阻塞")])]),s._v(" "),a("h3",{attrs:{id:"二、mysqldump备份和恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、mysqldump备份和恢复"}},[s._v("#")]),s._v(" 二、mysqldump备份和恢复")]),s._v(" "),a("blockquote",[a("p",[s._v("MySQL自带的备份工具，是当前主流的备份软件之一，通过SQL语句将数据库中的数据导出成.sql文件，并且该文件是可读的，因此称之为逻辑备份")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ mysqldump -u用户名 -p密码 -h主机 数据库 表 --where "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sql条件"')]),s._v(" 参数 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 路径/文件名.sql       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n$ mysqldump -u用户名 -p密码 -h主机 数据库 表 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" 路径/文件名.sql       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复")]),s._v("\n$ mysqldump -h 主机IP -u用户名 -p密码 -t 数据库名 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 文件名.sql      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如: 只导出数据，不导出建表语句：")]),s._v("\n")])])]),a("h3",{attrs:{id:"三、参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、参数说明"}},[s._v("#")]),s._v(" 三、参数说明")]),s._v(" "),a("ul",[a("li",[s._v("-P (--port) : 指定连接的端口号")]),s._v(" "),a("li",[s._v("-d (--no-data)  : 不导出任何数据，指导出表结构")]),s._v(" "),a("li",[s._v("-t (--no-create-info): 只导出数据，不导出建表语句")]),s._v(" "),a("li",[s._v("-q (--quick): 用于转储大表，它强制mysqldump每次从服务器检索一行(不是所有行)并在输出前将它缓存到内存中")]),s._v(" "),a("li",[s._v("--default-character-set=charset : 指定字符集(utf8)")]),s._v(" "),a("li",[s._v("-R (--routines) : 转储存储程序(函数和程序)")])]),s._v(" "),a("h2",{attrs:{id:"mysql隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql隔离级别"}},[s._v("#")]),s._v(" mysql隔离级别")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/ggjucheng/archive/2012/11/11/2765237.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("explain"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[s._v("repeatable-read(可重复读):开启事务、读数据、读数据...，只要这个事务没结束，读取的数据都是一致的")]),s._v(" "),a("li",[s._v("read-commited(提交读):只要事务提交了，就能读到提交的数据")]),s._v(" "),a("li",[s._v("autocommit:是否开启自动提交事务模式，值为1表示每次提交SQL，事务都会自动提交，值为0表示必须使用commit提交和rollback回滚事务，事务不会自动提交")])]),s._v(" "),a("h2",{attrs:{id:"分组排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分组排序"}},[s._v("#")]),s._v(" 分组排序")]),s._v(" "),a("h3",{attrs:{id:"_1、同row-number等价的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、同row-number等价的方法"}},[s._v("#")]),s._v(" 1、同row_number等价的方法")]),s._v(" "),a("p",[s._v("通过name分组降序排序，取最后一条数据")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mm "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" mm "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" b    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+------+------+------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h2",{attrs:{id:"mysql索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql索引"}},[s._v("#")]),s._v(" MySQL索引")]),s._v(" "),a("p",[s._v("共两种索引")]),s._v(" "),a("ul",[a("li",[s._v("1、btree索引")]),s._v(" "),a("li",[s._v("2、hash索引")])]),s._v(" "),a("h2",{attrs:{id:"mysql优化-笔记2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql优化-笔记2"}},[s._v("#")]),s._v(" mysql优化 - 笔记2")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("少取字段、建立合理的索引\n具体方式：\n\n批量插入数据\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 每条数据用"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";"')]),s._v("分割\n   mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 一次性插入多个"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v("\n   mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t5 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" d"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+------+---------------+-------+---------+-------------------------+------+----------+-------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+------+---------------+-------+---------+-------------------------+------+----------+-------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" t5    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1234         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1234 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n\n\nselect_type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 简单类型的查询")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t5             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询的表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("range           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用到了索引，范围类查询")]),s._v("\nkey_len"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("innodb")]),s._v(":\n主键索引：既存储主键值，又在叶子中存储行的数据（称为聚簇索引）\n如果没有主键，则"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("做主键\n如果没有"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),s._v("，则系统生成一个内部的rowid做主键\n\nmyisam: 非聚簇索引\n\n聚簇索引：\n优势：不用回行，因为数据就在索引底下\n劣势：遇到不规则的数据时，容易造成页分裂\n\n索引覆盖：如果查询的列恰好是索引的一部分，那么查询只需要在索引文件上执行，不需要回行到磁盘再找数据\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);